package com.ktdsuniversity.edu.collections;

import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

import com.ktdsuniversity.edu.collections.list.shop.Product;



public class MapExam {

	public static void main(String[] args) {

		Map<String, Integer> priceMap = new HashMap<>(); // 제네릭 2개
		
		priceMap.put("Macbook", 300_000);
		priceMap.put("IBM labtop", 400_000);
		priceMap.put("Mini PC", 200_000);
		
		System.out.println(priceMap); // {key=value, ...}
		System.out.println(priceMap.size());
		
		priceMap.put("Mini PC", 350_000);
		System.out.println(priceMap); // "Mini PC" 데이터만 변경
		System.out.println(priceMap.size());
		
		priceMap.put("mini pc", 500_000);
		System.out.println(priceMap); // 데이터 추가
		System.out.println(priceMap.size());
		
		int price = priceMap.get("Mini PC");
		System.out.println(price);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
	
		// Null 혹은 NullPointerException 회피하는 방법
		// Case 1 => ContainsKey
		if(priceMap.containsKey("gram")) {
			int price4 = priceMap.get("gram");
			System.out.println(price4);
		}
		// Case 2 => getOrDefault
		int price5 = priceMap.getOrDefault("gram", 0); // gram key가 존재한다면 그 key의 value를 반환, 없으면 뒤에 0을 반환 (자바 1.8 때 추가)
		System.out.println(price5);
		
		Integer price3 = priceMap.get("gram"); // 레퍼런스 타입으로 받으면 또 에러 안 남
		System.out.println(price3);
		
		try{
			int price2 = priceMap.get("gram"); // NullPointerException (null => int로 변환하려고 했기 때문)
			System.out.println(price2);
		}
		catch(NullPointerException e) {
			
		}
		
		//if(!priceMap.containsKey("Macbook"))
		
		priceMap.remove("Macbook"); // 삭제값 반환
		priceMap.remove("gram"); // 존재하지 않는 것 지워도 에러 안남 
		System.out.println(priceMap);
		
		// Map을 반복하는 방법 : 일반적인 경우 X
		// Map을 반복하겠다! --> Map 내부의 값을 하나씩 검증할 필요가 있을 때 --> 반복 코드 제거
		// Map을 반복하는 방법이 특이 -> Map X, Map을 구성하는 Entry 추출 -> EntrySet -> Set<Entry>
		// Set<Entry> ==> for, Iterator<String> => while
		// 반복 함수.
		// 반복 Case 1: Set (잘 안씀) 백엔드 서버 검증할 때 쓸 것
		Set<Entry<String, Integer>> entrySet = priceMap.entrySet(); // map 만들때 필요한 제네릭 필요
		for(Entry<String, Integer> entry : entrySet) {
			System.out.println(entry.getKey() + " / " + entry.getValue());
		}
		// 반복 Case 2: 반복 함수  
		priceMap.forEach((k, v) -> {
			System.out.println(k + " / " + v);
		});
		
		// 활용 방법
		// key는 보통 String
		Map<String, Product> parts = new HashMap<>();
		parts.put("CPU", new Product("CPU", 10000, 100));
		parts.put("RAM 32GB", new Product("RAM 32GB", 50000, 100000));
		
		Product cpu = parts.get("CPU"); // 반복할 필요없이 key만 넣어주면 나온다 (하지만 나중에 수정할 때 분석이 어려움..)
		System.out.println(cpu);
		
		Product gpu = parts.get("GTX5060"); 
		System.out.println(gpu); // null 
		
		// 심화
		// List < Map < String... 
		
	}

}
